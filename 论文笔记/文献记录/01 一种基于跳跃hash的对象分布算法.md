# 一种基于跳跃hash的对象分布算法

## 问题定义

- 对象数目：$ n(n≥1) $，一次编号为 $ 0,1,2, ... ,n-1$。
- 对象标识符：$ X_i $ ，表示第$i$个对象的标识符
- 存储节点数目：$ m(m≥1) $，依次编号为$ 0,1,2, ... ,m-1 $,并组成数组。
- 节点权值：$ w_s $，表示第$ s $个节点的权值

> 注意：
>
> 1. 对象数目理论上无限，且对象数量远远大于节点数量，即 $ n ≥ m $
> 2. 对象存储系统对象分布问题可以抽象为数学问题：构造函数 $ G(X~i,R,m)=s $,函数$G$表示将对象$X~i$的第$R$个副本映射到第$s$个节点上

## 对象分布算法的评价指标

- 公平性：每个节点存储的对象数目和其自身的能力(存储容量、性能和节点带宽等)成正比,即若第 *s* 个节点存储数据对象数目为$n\times / \sum_{j=1}^{m-1}w_j$则是公平的。

- 高效性：若对于任意对象,都可以快速计算得到其存放节点,则该算法是高效的。

- 简洁性：若算法只需要少量信息计算存放对象的节点,且代码实现逻辑简单,则该算法是简洁的。

- 自适应性：存储系统为了满足容量、性能需求会加入新的存储设备,也会替换、删除损坏的设备.此类

  情况都可以认为是节点的权值发生变化.节点的权值变化后,应进行数据迁移来保证数据的可用性和

  节点的负载均衡.若迁移后仍是均匀分布的,且迁移过程中尽可能地迁移较少的对象,即对象迁移仅仅

  发生在权值不变的节点和权值变化的节点之间,权值不变的节点之间不发生对象迁移,则该算法是自

  适应的。

## MJHAR算法

​		算法思想：将节点映射到二维矩阵，从矩阵的行间和行内分别采用跳跃查找算法计算目标节点的行号和列号,行号和列号组合就是目标节点序号。